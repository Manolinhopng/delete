<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>¬øQuieres ser mi novia?</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    font-family: "Comic Sans MS", cursive;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background-image: url('https://www.1800flowers.com/blog/wp-content/uploads/2021/05/Birthday-Flowers-Colors.jpg');
    background-size: cover;
    background-position: center;
    transition: background 1s ease-in-out;
  }

  .caja {
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    transition: left 0.3s, top 0.3s;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }

  h1 {
    color: #e91e63;
    text-shadow: 1px 1px 2px #00000030;
  }

  button {
    font-size: 1.1rem;
    margin: 10px;
    padding: 10px 25px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.3s;
  }

  #si {
    background-color: #ff6fb0;
    color: white;
  }

  #si:hover {
    background-color: #ff4081;
  }

  #no {
    background-color: #999;
    color: white;
  }

  #no:hover {
    background-color: #777;
  }

  #mensaje {
    display: none;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 50px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    text-align: center;
    color: #e91e63;
    font-size: 1.8rem;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 400px;
    animation: aparecer 1s ease;
  }

  @keyframes aparecer {
    from { opacity: 0; transform: translate(-50%, -60%) scale(0.8); }
    to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  }

  .corazon {
    position: fixed;
    color: #ff5ca1;
    font-size: 2rem;
    animation: flotar 6s linear infinite;
    opacity: 0.8;
    pointer-events: none;
  }

  @keyframes flotar {
    0% { transform: translateY(100vh) scale(0.8); opacity: 0.9; }
    100% { transform: translateY(-10vh) scale(1.3); opacity: 0; }
  }

  .audio-note {
    position: fixed;
    top: 10px;
    right: 10px;
    background: rgba(255, 255, 255, 0.9);
    padding: 10px;
    border-radius: 8px;
    font-size: 0.9rem;
    color: #333;
  }
</style>
</head>
<body>

<div class="caja" id="caja">
  <h1>¬øQuieres ser mi novia? üíñ</h1>
  <button id="si">S√≠ üòç</button>
  <button id="no">No üò¢</button>
</div>

<div id="mensaje">üíû ¬°Sab√≠a que dir√≠as que s√≠! üíê<br>Te amo much√≠simo ü•∞</div>
<div class="audio-note" id="audioNote">üîä Haz clic para iniciar la m√∫sica</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
<script>
  const caja = document.getElementById("caja");
  const mensaje = document.getElementById("mensaje");
  const siBtn = document.getElementById("si");
  const noBtn = document.getElementById("no");
  const audioNote = document.getElementById("audioNote");
  let musicaIniciada = false;
  let synth;

  async function iniciarMusica() {
    if (!musicaIniciada) {
      await Tone.start();
      synth = new Tone.PolySynth(Tone.Synth, {
        oscillator: { type: "triangle" },
        envelope: { attack: 1.5, decay: 0.4, sustain: 0.8, release: 2 }
      }).toDestination();

      synth.volume.value = -25;

      const melodia = [
        { nota: "C4", duracion: "4n" },
        { nota: "E4", duracion: "4n" },
        { nota: "G4", duracion: "4n" },
        { nota: "A4", duracion: "2n" },
        { nota: "F4", duracion: "4n" },
        { nota: "G4", duracion: "4n" },
        { nota: "C5", duracion: "2n" },
      ];

      function tocarMelodia() {
        let tiempo = Tone.now();
        melodia.forEach(({ nota, duracion }) => {
          synth.triggerAttackRelease(nota, duracion, tiempo);
          tiempo += Tone.Time(duracion).toSeconds();
        });
        setTimeout(tocarMelodia, 7000);
      }

      tocarMelodia();
      musicaIniciada = true;
      audioNote.textContent = "üéµ M√∫sica sonando...";
      setTimeout(() => audioNote.style.display = "none", 3000);
    }
  }

  function crearCorazon() {
    const corazon = document.createElement("div");
    corazon.classList.add("corazon");
    corazon.textContent = "üíñ";
    corazon.style.left = Math.random() * 100 + "vw";
    corazon.style.animationDuration = 3 + Math.random() * 4 + "s";
    document.body.appendChild(corazon);
    setTimeout(() => corazon.remove(), 7000);
  }

  siBtn.addEventListener("click", () => {
    iniciarMusica();
    caja.style.display = "none";
    mensaje.style.display = "block";
    setInterval(crearCorazon, 400);
  });

  noBtn.addEventListener("mouseover", () => {
    iniciarMusica();
    const maxX = window.innerWidth - caja.offsetWidth;
    const maxY = window.innerHeight - caja.offsetHeight;
    const x = Math.random() * maxX;
    const y = Math.random() * maxY;
    caja.style.left = `${x}px`;
    caja.style.top = `${y}px`;
  });
</script>

</body>
</html>
